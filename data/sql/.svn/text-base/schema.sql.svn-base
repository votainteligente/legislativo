CREATE TABLE Autor (id_autor BIGINT AUTO_INCREMENT, nombre VARCHAR(100) NOT NULL, apellidos VARCHAR(100) NOT NULL, cargo VARCHAR(30), periodos VARCHAR(255), id_parlamentario BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX id_parlamentario_idx (id_parlamentario), PRIMARY KEY(id_autor)) ENGINE = INNODB;
CREATE TABLE AutorProyectoLey (id_autor BIGINT, id_proyecto_ley BIGINT, PRIMARY KEY(id_autor, id_proyecto_ley)) ENGINE = INNODB;
CREATE TABLE Circunscripcion (id_circunscripcion BIGINT, nombre VARCHAR(255) NOT NULL UNIQUE, PRIMARY KEY(id_circunscripcion)) ENGINE = INNODB;
CREATE TABLE Comision (id_comision BIGINT AUTO_INCREMENT, nombre VARCHAR(255) NOT NULL UNIQUE, tipo VARCHAR(100) NOT NULL, camara VARCHAR(30), contacto_mail VARCHAR(100), contacto_tel VARCHAR(100), contacto_form VARCHAR(255), abogado_secretario VARCHAR(255), abogado_ayudante VARCHAR(255), secretario_ejecutivo VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id_comision)) ENGINE = INNODB;
CREATE TABLE Comuna (id_comuna BIGINT AUTO_INCREMENT, nombre VARCHAR(255) NOT NULL, id_distrito BIGINT NOT NULL, INDEX id_distrito_idx (id_distrito), PRIMARY KEY(id_comuna)) ENGINE = INNODB;
CREATE TABLE Debate (id_debate BIGINT AUTO_INCREMENT, id_proyecto_ley BIGINT NOT NULL, comision_sala INT NOT NULL, comisiones_unidas INT, camara VARCHAR(30), fecha DATE NOT NULL, hora TIME NOT NULL, discusion INT, tema VARCHAR(255) NOT NULL, debate TEXT, tags VARCHAR(255), docs TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX id_proyecto_ley_idx (id_proyecto_ley), PRIMARY KEY(id_debate)) ENGINE = INNODB;
CREATE TABLE DebateComision (id_debate BIGINT, id_comision BIGINT, PRIMARY KEY(id_debate, id_comision)) ENGINE = INNODB;
CREATE TABLE Distrito (id_distrito BIGINT, id_circunscripcion BIGINT NOT NULL, id_region BIGINT NOT NULL, INDEX id_circunscripcion_idx (id_circunscripcion), INDEX id_region_idx (id_region), PRIMARY KEY(id_distrito)) ENGINE = INNODB;
CREATE TABLE Materia (id_materia BIGINT, nombre VARCHAR(255) NOT NULL UNIQUE, super_materia VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id_materia)) ENGINE = INNODB;
CREATE TABLE Parlamentario (id_parlamentario BIGINT AUTO_INCREMENT, nombre VARCHAR(100) NOT NULL, apellidos VARCHAR(100) NOT NULL, senador_diputado VARCHAR(10) NOT NULL, id_circunscripcion BIGINT, id_distrito BIGINT, pacto VARCHAR(100), id_partido BIGINT NOT NULL, sexo VARCHAR(1) NOT NULL, fecha_nacimiento DATE, profesion VARCHAR(100), mesa_directiva VARCHAR(100), periodos_senador BIGINT, periodos_diputado BIGINT, periodos_senador_desc VARCHAR(100), periodos_diputado_desc VARCHAR(100), primera_vez VARCHAR(2), comisiones_anteriores TEXT, comisiones_actuales TEXT, voto_nro BIGINT, voto_porcentaje FLOAT(18, 2), gasto_electoral2005 BIGINT, financiamiento_electoral2005 BIGINT, gasto_electoral2009 BIGINT, financiamiento_electoral2009 BIGINT, comite_parlamentario TEXT, mail VARCHAR(255), web VARCHAR(255), twitter VARCHAR(255), facebook VARCHAR(255), dietas BIGINT, declaracion_interes TEXT, declaracion_patrimonio TEXT, educacion_universitaria VARCHAR(255), educacion_postgrado VARCHAR(255), cargos_gobierno VARCHAR(255), cargos_eleccion TEXT, experiencia_politica TEXT, experiencia_laboral TEXT, id_parlamento BIGINT, activo INT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX id_distrito_idx (id_distrito), INDEX id_circunscripcion_idx (id_circunscripcion), INDEX id_partido_idx (id_partido), PRIMARY KEY(id_parlamentario)) ENGINE = INNODB;
CREATE TABLE ParlamentarioEnComision (id_parlamentario BIGINT, id_comision BIGINT, cargo VARCHAR(1), PRIMARY KEY(id_parlamentario, id_comision)) ENGINE = INNODB;
CREATE TABLE Partido (id_partido BIGINT AUTO_INCREMENT, nombre VARCHAR(255) NOT NULL, sigla VARCHAR(10) NOT NULL, fecha_nacimiento VARCHAR(100), mesa_adulta TEXT, mesa_juventud TEXT, nro_diputados_2010 BIGINT NOT NULL, nro_senadores_2010 BIGINT NOT NULL, direccion VARCHAR(255), telefono VARCHAR(20), mail VARCHAR(100), web VARCHAR(100), historia TEXT, principios VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id_partido)) ENGINE = INNODB;
CREATE TABLE ProyectoLey (id_proyecto_ley BIGINT AUTO_INCREMENT, nro_boletin VARCHAR(10) NOT NULL UNIQUE, titulo TEXT NOT NULL, titulo_sesion VARCHAR(255), fecha_ingreso DATE NOT NULL, iniciativa VARCHAR(30) NOT NULL, tipo VARCHAR(30) NOT NULL, camara_origen VARCHAR(30) NOT NULL, urgencia VARCHAR(255), etapa VARCHAR(255), sub_etapa VARCHAR(255), ley BIGINT, ley_bcn VARCHAR(255), decreto BIGINT, decreto_bcn VARCHAR(255), fecha_publicacion DATE, id_materia BIGINT, nro_interno BIGINT, avance INT, nro_tramitacion BIGINT, tramitacion_act VARCHAR(2), resumen TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX id_materia_idx (id_materia), PRIMARY KEY(id_proyecto_ley)) ENGINE = INNODB;
CREATE TABLE ProyectoLeyEnComision (id_proyecto_ley BIGINT, id_comision BIGINT, PRIMARY KEY(id_proyecto_ley, id_comision)) ENGINE = INNODB;
CREATE TABLE ProyectoLeyEnSesion (id_sesion BIGINT, id_proyecto_ley BIGINT, PRIMARY KEY(id_sesion, id_proyecto_ley)) ENGINE = INNODB;
CREATE TABLE ProyectoLeyRefundido (id_proyecto_ley BIGINT, id_proyecto_ley2 BIGINT, PRIMARY KEY(id_proyecto_ley, id_proyecto_ley2)) ENGINE = INNODB;
CREATE TABLE Region (id_region BIGINT AUTO_INCREMENT, sigla VARCHAR(4) NOT NULL UNIQUE, nombre VARCHAR(255) NOT NULL UNIQUE, PRIMARY KEY(id_region)) ENGINE = INNODB;
CREATE TABLE Sesion (id_sesion BIGINT AUTO_INCREMENT, fecha DATE NOT NULL, camara VARCHAR(30) NOT NULL, nro BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id_sesion)) ENGINE = INNODB;
CREATE TABLE Votacion (id_votacion BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, camara VARCHAR(30) NOT NULL, en_sala INT NOT NULL, tipo VARCHAR(30) NOT NULL, articulo VARCHAR(255), materia TEXT, fecha DATE NOT NULL, hora TIME NOT NULL, voto_si BIGINT NOT NULL, voto_no BIGINT NOT NULL, voto_abs BIGINT NOT NULL, voto_disp BIGINT, voto_pareos BIGINT NOT NULL, voto_aus BIGINT, resultado VARCHAR(10) NOT NULL, quorum VARCHAR(100), id_proyecto_ley BIGINT, id_sesion BIGINT, id_debate BIGINT, id_parlamento BIGINT UNIQUE NOT NULL, visible INT DEFAULT 1, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX id_proyecto_ley_idx (id_proyecto_ley), INDEX id_sesion_idx (id_sesion), INDEX id_debate_idx (id_debate), PRIMARY KEY(id_votacion)) ENGINE = INNODB;
CREATE TABLE VotacionComision (id_votacion BIGINT AUTO_INCREMENT, id_comision BIGINT NOT NULL, camara VARCHAR(30) NOT NULL, tipo VARCHAR(30) NOT NULL, articulo VARCHAR(255), voto_si BIGINT NOT NULL, voto_no BIGINT NOT NULL, voto_abs BIGINT NOT NULL, voto_disp BIGINT, voto_pareos BIGINT, voto_aus BIGINT, resultado VARCHAR(10) NOT NULL, quorum VARCHAR(100), id_proyecto_ley BIGINT, id_debate BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX id_comision_idx (id_comision), INDEX id_proyecto_ley_idx (id_proyecto_ley), INDEX id_debate_idx (id_debate), PRIMARY KEY(id_votacion)) ENGINE = INNODB;
CREATE TABLE VotacionComisionParlamentario (id_votacion BIGINT, id_parlamentario BIGINT, voto VARCHAR(1) NOT NULL, PRIMARY KEY(id_votacion, id_parlamentario)) ENGINE = INNODB;
CREATE TABLE VotacionParlamentario (id_votacion BIGINT, id_parlamentario BIGINT, voto VARCHAR(1) NOT NULL, PRIMARY KEY(id_votacion, id_parlamentario)) ENGINE = INNODB;
CREATE TABLE sf_guard_group (id INT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id INT, permission_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id INT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id INT AUTO_INCREMENT, user_id INT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id, ip_address)) ENGINE = INNODB;
CREATE TABLE sf_guard_user (id INT AUTO_INCREMENT, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id INT, group_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id INT, permission_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) ENGINE = INNODB;
ALTER TABLE Autor ADD CONSTRAINT Autor_id_parlamentario_Parlamentario_id_parlamentario FOREIGN KEY (id_parlamentario) REFERENCES Parlamentario(id_parlamentario);
ALTER TABLE AutorProyectoLey ADD CONSTRAINT AutorProyectoLey_id_proyecto_ley_ProyectoLey_id_proyecto_ley FOREIGN KEY (id_proyecto_ley) REFERENCES ProyectoLey(id_proyecto_ley);
ALTER TABLE AutorProyectoLey ADD CONSTRAINT AutorProyectoLey_id_autor_Autor_id_autor FOREIGN KEY (id_autor) REFERENCES Autor(id_autor);
ALTER TABLE Comuna ADD CONSTRAINT Comuna_id_distrito_Distrito_id_distrito FOREIGN KEY (id_distrito) REFERENCES Distrito(id_distrito);
ALTER TABLE Debate ADD CONSTRAINT Debate_id_proyecto_ley_ProyectoLey_id_proyecto_ley FOREIGN KEY (id_proyecto_ley) REFERENCES ProyectoLey(id_proyecto_ley);
ALTER TABLE DebateComision ADD CONSTRAINT DebateComision_id_debate_Debate_id_debate FOREIGN KEY (id_debate) REFERENCES Debate(id_debate);
ALTER TABLE DebateComision ADD CONSTRAINT DebateComision_id_comision_Comision_id_comision FOREIGN KEY (id_comision) REFERENCES Comision(id_comision);
ALTER TABLE Distrito ADD CONSTRAINT Distrito_id_region_Region_id_region FOREIGN KEY (id_region) REFERENCES Region(id_region);
ALTER TABLE Distrito ADD CONSTRAINT Distrito_id_circunscripcion_Circunscripcion_id_circunscripcion FOREIGN KEY (id_circunscripcion) REFERENCES Circunscripcion(id_circunscripcion);
ALTER TABLE Parlamentario ADD CONSTRAINT PiCi FOREIGN KEY (id_circunscripcion) REFERENCES Circunscripcion(id_circunscripcion);
ALTER TABLE Parlamentario ADD CONSTRAINT Parlamentario_id_partido_Partido_id_partido FOREIGN KEY (id_partido) REFERENCES Partido(id_partido);
ALTER TABLE Parlamentario ADD CONSTRAINT Parlamentario_id_distrito_Distrito_id_distrito FOREIGN KEY (id_distrito) REFERENCES Distrito(id_distrito);
ALTER TABLE ParlamentarioEnComision ADD CONSTRAINT PiPi FOREIGN KEY (id_parlamentario) REFERENCES Parlamentario(id_parlamentario);
ALTER TABLE ParlamentarioEnComision ADD CONSTRAINT ParlamentarioEnComision_id_comision_Comision_id_comision FOREIGN KEY (id_comision) REFERENCES Comision(id_comision);
ALTER TABLE ProyectoLey ADD CONSTRAINT ProyectoLey_id_materia_Materia_id_materia FOREIGN KEY (id_materia) REFERENCES Materia(id_materia);
ALTER TABLE ProyectoLeyEnComision ADD CONSTRAINT ProyectoLeyEnComision_id_comision_Comision_id_comision FOREIGN KEY (id_comision) REFERENCES Comision(id_comision);
ALTER TABLE ProyectoLeyEnComision ADD CONSTRAINT PiPi_1 FOREIGN KEY (id_proyecto_ley) REFERENCES ProyectoLey(id_proyecto_ley);
ALTER TABLE ProyectoLeyEnSesion ADD CONSTRAINT ProyectoLeyEnSesion_id_proyecto_ley_ProyectoLey_id_proyecto_ley FOREIGN KEY (id_proyecto_ley) REFERENCES ProyectoLey(id_proyecto_ley);
ALTER TABLE ProyectoLeyRefundido ADD CONSTRAINT ProyectoLeyRefundido_id_proyecto_ley_ProyectoLey_id_proyecto_ley FOREIGN KEY (id_proyecto_ley) REFERENCES ProyectoLey(id_proyecto_ley);
ALTER TABLE Votacion ADD CONSTRAINT Votacion_id_sesion_Sesion_id_sesion FOREIGN KEY (id_sesion) REFERENCES Sesion(id_sesion);
ALTER TABLE Votacion ADD CONSTRAINT Votacion_id_proyecto_ley_ProyectoLey_id_proyecto_ley FOREIGN KEY (id_proyecto_ley) REFERENCES ProyectoLey(id_proyecto_ley);
ALTER TABLE Votacion ADD CONSTRAINT Votacion_id_debate_Debate_id_debate FOREIGN KEY (id_debate) REFERENCES Debate(id_debate);
ALTER TABLE VotacionComision ADD CONSTRAINT VotacionComision_id_proyecto_ley_ProyectoLey_id_proyecto_ley FOREIGN KEY (id_proyecto_ley) REFERENCES ProyectoLey(id_proyecto_ley);
ALTER TABLE VotacionComision ADD CONSTRAINT VotacionComision_id_debate_Debate_id_debate FOREIGN KEY (id_debate) REFERENCES Debate(id_debate);
ALTER TABLE VotacionComision ADD CONSTRAINT VotacionComision_id_comision_Comision_id_comision FOREIGN KEY (id_comision) REFERENCES Comision(id_comision);
ALTER TABLE VotacionComisionParlamentario ADD CONSTRAINT ViVi_1 FOREIGN KEY (id_votacion) REFERENCES VotacionComision(id_votacion);
ALTER TABLE VotacionComisionParlamentario ADD CONSTRAINT ViPi FOREIGN KEY (id_parlamentario) REFERENCES Parlamentario(id_parlamentario);
ALTER TABLE VotacionParlamentario ADD CONSTRAINT VotacionParlamentario_id_votacion_Votacion_id_votacion FOREIGN KEY (id_votacion) REFERENCES Votacion(id_votacion);
ALTER TABLE VotacionParlamentario ADD CONSTRAINT ViPi_1 FOREIGN KEY (id_parlamentario) REFERENCES Parlamentario(id_parlamentario);
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
